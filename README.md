# TypeScript Local プロジェクト要約

## プロジェクト概要
- 目的: Windows 11の Docker Desktop 環境で、TypeScriptとExpressを使用してHello Worldをブラウザで表示
- ドメイン: kato.localhost.net (hostsファイルで127.0.0.1にマッピング)
- ポート: 8081 (ホスト側) → 3000 (コンテナ側)
- コンテナ名: typescript-local

## プロジェクト構造
```
typescript-local/
│
├── docker-compose.yml
├── Dockerfile
├── package.json
├── package-lock.json
├── tsconfig.json
├── .gitignore
└── src/
    └── server.ts
```

## 主要ファイルの内容

### docker-compose.yml
```yaml
version: '3'
services:
  web:
    build: .
    container_name: typescript-local
    ports:
      - "8081:3000"
```

### Dockerfile
```dockerfile
FROM node:14-alpine

WORKDIR /app

COPY package.json package-lock.json ./
RUN npm install

COPY . .
RUN npm run build

EXPOSE 3000

CMD ["npm", "start"]
```

### src/server.ts
```typescript
import express from 'express';

const app = express();
const port = 3000;

app.get('/', (req, res) => {
  res.send('Hello World from TypeScript!');
});

app.listen(port, () => {
  console.log(`Server running at http://localhost:${port}`);
});
```

### package.json
```json
{
  "name": "typescript-local",
  "version": "1.0.0",
  "scripts": {
    "build": "tsc",
    "start": "node dist/server.js"
  },
  "dependencies": {
    "express": "^4.17.1"
  },
  "devDependencies": {
    "@types/express": "^4.17.13",
    "typescript": "^4.5.4"
  }
}
```

### tsconfig.json
```json
{
  "compilerOptions": {
    "target": "es6",
    "module": "commonjs",
    "outDir": "./dist",
    "strict": true,
    "esModuleInterop": true
  },
  "include": ["src/**/*"]
}
```

### .gitignore
```
# Dependencies
node_modules/

# Logs
logs
*.log
npm-debug.log*

# Runtime data
pids
*.pid
*.seed
*.pid.lock

# Directory for instrumented libs generated by jscoverage/JSCover
lib-cov

# Coverage directory used by tools like istanbul
coverage

# nyc test coverage
.nyc_output

# Grunt intermediate storage (https://gruntjs.com/creating-plugins#storing-task-files)
.grunt

# Bower dependency directory (https://bower.io/)
bower_components

# node-waf configuration
.lock-wscript

# Compiled binary addons (https://nodejs.org/api/addons.html)
build/Release

# Dependency directories
jspm_packages/

# TypeScript v1 declaration files
typings/

# Optional npm cache directory
.npm

# Optional eslint cache
.eslintcache

# Optional REPL history
.node_repl_history

# Output of 'npm pack'
*.tgz

# Yarn Integrity file
.yarn-integrity

# dotenv environment variables file
.env

# parcel-bundler cache (https://parceljs.org/)
.cache

# next.js build output
.next

# nuxt.js build output
.nuxt

# vuepress build output
.vuepress/dist

# Serverless directories
.serverless/

# FuseBox cache
.fusebox/

# DynamoDB Local files
.dynamodb/

# TypeScript output
dist/
```

## セットアップ手順
1. プロジェクトディレクトリ（typescript-local）を作成
2. 上記の各ファイル（docker-compose.yml, Dockerfile, package.json, tsconfig.json, src/server.ts, .gitignore）を作成
3. 以下のnpmコマンドを実行して必要なパッケージをインストール：
   ```
   npm install express
   npm install --save-dev typescript @types/express @types/node
   ```
4. コマンドラインでプロジェクトディレクトリに移動
5. `docker-compose up -d --build` を実行してコンテナをビルド・起動
6. ブラウザで `http://kato.localhost.net:8081` にアクセス

## 技術的な説明
- TypeScriptを使用してExpressサーバーを実装
- Docker ComposeでNode.js環境をコンテナ化
- ホストのポート8081をコンテナの3000ポートにマッピング
- TypeScriptコードはビルド時にJavaScriptにコンパイルされる

## 注意点
- ポート8081が使用中の場合、別のポートを使用するようdocker-compose.ymlを変更する
- node_modulesディレクトリはgitignoreに含まれており、リポジトリにはコミットされない
- package-lock.jsonはバージョン管理のために含める

## トラブルシューティング
- コンテナの状態確認: `docker ps`
- ログの確認: `docker logs typescript-local`
- コンテナの再起動: `docker-compose down` followed by `docker-compose up -d`
